name: test-run
model_name: flux-dev
use_attention_mask: True

trainer:
  precision: bf16-true
  batch_size: 16
  seed: 1138
  wandb_id: ""
  accumulate_grad_batches: 1
  gradient_clip_val: 0.0

  save_format: safetensors
  checkpoint_dir: /storage/local/tmpfiles/checkpoint
  checkpoint_freq: 10
  checkpoint_steps: 1000
  save_weights_only: true
  max_epochs: 1
  max_steps: -1
  
dataset:
  # store_cls: common.private_storage.ParquetImageClustered
  img_path: "/storage/dev/nyanko/niji-anime-1"
  repeat_strategy:
    - ["", 10]

optimizer:
  name: torch.optim.AdamW
  params:
    lr: 2e-5
    fused: True
    weight_decay: 0.01

scheduler:
  name: transformers.get_constant_schedule_with_warmup
  params:
    num_warmup_steps: 500
    last_epoch: -1

sampling:
  enabled: false
  use_wandb: true
  seed: 42
  height: 1280
  width: 768
  every_n_steps: 500
  every_n_epochs: 1
  save_dir: "/storage/local/tmpfiles/samples"
  prompts: 
    - "best quality, a girl with a yellow hat and a yellow shirt, sitting, white legwear, uniform, jacket, thighhighs, bare shoulders, high contrast, paint splatter"
    - "best quality, 1girl, solo, loli, cat girl, silver hair ,blue eyes, flat chest, solo, beautiful detailed background, messy hair, long hair"
    - "masterpiece, best quality, 1girl, solo,loli,wedding dress|see-through highleg leotard, veil, elbow gloves, white thighhighs, crown, earrings, bow on waist, sideboob, lace,"
    - "1girl, solo, shirt, thighhighs, skirt, hands on hips, white shirt, crystal, flandre scarlet, blonde hair, grey skirt, red bow, red eyes, black thighhighs, wings, white background,"
    - "1girl,sitting,fantasy,masterpiece,best quality,(long blonde hair),(blue eyes),(floating hair),(black ribbed sweater:1.1),(red plaid skirt:1.1),(cat ears)"
    - artist:ran'ou_(tamago_no_kimi), best quality, sensitive, 1girl, pointy ears, long hair, jewelry, looking at viewer, earrings, black gloves, thigh strap, bare shoulders, parted lips, underwear, see-through, off shoulder, bangs, mole on thigh, brown hair, on back, blue jacket, open clothes, pillow, barefoot, long sleeves, open jacket, eyebrows visible through hair, hands up, clothing cutout, half gloves, hot elf, black tight wear, pointed ears, lying down, highres, 2020s
    - best quality, 1girl, japanese clothes, wind chime, looking at viewer, smile, long hair, hair ornament, silver hair, white kimono, ponytail, hair between eyes, yukata, blue sky, floral print, bangs, hair flower, closed mouth, hair ribbon, long sleeves, looking back, alternate costume, signature, sidelocks, print kimono, white flower, blush, wide sleeves, red ribbon, cloudy sky, outdoors, 25-ji, Night Code de., Yoisaki Kanade, Project Sekai, absurdres, 2020s
    - "hololive, rurudo, tokoyami towa, good quality"
